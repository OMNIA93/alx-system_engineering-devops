#!/usr/bin/env bash
# Prints subdomains for a domain

# Check for the existence of the 'dig' command
if ! command -v dig &> /dev/null; then
    echo "Error: 'dig' command not found. Please install the dnsutils package or equivalent."
    exit 1
fi

# Function to print subdomain information
print_subdomain_info() {
    local full_domain="$1"
    local sub_domain=${full_domain%%.*}
    
    local answer_section
    answer_section=$(dig "$full_domain" +short)

    if [ -z "$answer_section" ]; then
        echo "No records found for subdomain $sub_domain"
    else
        local record_type=$(dig "$full_domain" | awk '/ANSWER SECTION:/ {print $4}')
        echo "The subdomain $sub_domain is a $record_type record and points to $answer_section"
    fi
}

# Main script
if [ $# -eq 1 ]; then
    print_subdomain_info "www.$1"
    print_subdomain_info "lb-01.$1"
    print_subdomain_info "web-01.$1"
    print_subdomain_info "web-02.$1"
elif [ $# -eq 2 ]; then
    print_subdomain_info "$2.$1"
else
    echo "Usage: $0 <domain> [subdomain]"
    exit 1
fi
